<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BPSR Tools</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- Resize handles for frameless window -->
    <div class="resize-handle resize-top"></div>
    <div class="resize-handle resize-right"></div>
    <div class="resize-handle resize-bottom"></div>
    <div class="resize-handle resize-left"></div>
    <div class="resize-handle resize-top-left"></div>
    <div class="resize-handle resize-top-right"></div>
    <div class="resize-handle resize-bottom-left"></div>
    <div class="resize-handle resize-bottom-right"></div>

    <div class="bpsr-tools">
      <header class="controls">
        <img
          src="icon.png"
          alt="Logo"
          style="height: 40px; margin-right: 10px"
        />
        <button
          class="control-button btn-medium"
          id="reset-button"
          title="Clear Meter"
        >
          <i class="fa-solid fa-broom"></i>
        </button>
        <button
          class="control-button btn-medium"
          id="pause-button"
          title="Pause/Resume Tracking"
        >
          <i class="fa-solid fa-pause"></i>
        </button>
        <!-- Advanced/Lite button -->
        <button
          class="control-button btn-large"
          id="advanced-lite-btn"
          title="Toggle Advanced/Lite"
        >
          Advanced
        </button>
        <!-- DPS/Healer button only visible in Lite mode -->
        <button
          class="control-button btn-large"
          id="lite-dps-healer-btn"
          style="display: none"
        >
          DPS
        </button>
        <!-- Filter button -->
        <button
          class="control-button"
          id="filter-button"
          title="Filter Options"
        >
          <i class="fa-solid fa-filter"></i>
        </button>
        <div style="flex: 1"></div>
        <!-- Theme toggle button -->
        <button
          class="control-button"
          id="theme-toggle-button"
          title="Toggle Light/Dark Mode"
        >
          <i class="fa-solid fa-moon"></i>
        </button>
        <!-- Always on top toggle (Electron only) -->
        <button
          class="control-button electron-only"
          id="always-on-top-button"
          title="Toggle Always on Top"
          style="display: none"
        >
          <i class="fa-solid fa-thumbtack"></i>
        </button>
        <button class="control-button" id="close-button" title="Close window">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </header>

      <!-- Filter Popup -->
      <div id="filter-popup" class="filter-popup" style="display: none">
        <div class="filter-popup-content">
          <div class="filter-popup-header">
            <h3>Filter Options</h3>
            <button class="filter-close-btn" id="close-filter-popup">
              <i class="fa-solid fa-xmark"></i>
            </button>
          </div>
          <div class="filter-popup-body">
            <div class="filter-group">
              <label for="monster-type-filter">Monster Type:</label>
              <div class="filter-multiselect" id="monster-type-filter">
                <button type="button" class="filter-multiselect-button">
                  <span class="filter-multiselect-text">All Selected</span>
                  <i
                    class="fa-solid fa-chevron-down filter-multiselect-arrow"
                  ></i>
                </button>
                <div class="filter-multiselect-dropdown" style="display: none">
                  <div class="filter-checkbox-group">
                    <label class="filter-checkbox-item">
                      <input type="checkbox" value="normal" checked />
                      <span>Normal</span>
                    </label>
                    <label class="filter-checkbox-item">
                      <input type="checkbox" value="dummy" checked />
                      <span>Dummy</span>
                    </label>
                    <label class="filter-checkbox-item">
                      <input type="checkbox" value="elite" checked />
                      <span>Elite</span>
                    </label>
                    <label class="filter-checkbox-item">
                      <input type="checkbox" value="boss" checked />
                      <span>Boss</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="logs-section" style="margin-top: 8px"></div>
      <div id="loading-indicator" class="gui-loading-overlay">
        <div class="gui-loading-content">
          <div class="gui-spinner"></div>
          <p class="gui-loading-text">Waiting for combat data...</p>
          <p class="gui-loading-hint">Start a fight to see DPS metrics</p>
        </div>
      </div>
      <main
        id="player-bars-container"
        style="
          margin-top: 54px;
          border: 1px solid rgba(255, 255, 255, 0.12);
          border-radius: 4px;
          padding: 8px;
          display: none;
        "
      ></main>
    </div>

    <script src="js/guiClient.js"></script>
  </body>
</html>
