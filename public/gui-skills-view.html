<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Skill Analysis - BPSR Tools</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body class="skill-analysis-window">
    <div class="skill-analysis-container">
      <!-- Header -->
      <header class="skill-analysis-header">
        <div class="header-left">
          <img id="class-icon" src="icon.png" alt="Class Icon" style="height: 32px" />
          <h1 id="page-title">Advanced Skill Analysis</h1>
        </div>
        <div class="header-controls">
          <button
            class="control-button"
            id="refresh-button"
            title="Refresh data"
          >
            <i class="fa-solid fa-rotate"></i>
          </button>
          <button
            class="control-button"
            id="theme-toggle-button"
            title="Toggle Light/Dark Mode"
          >
            <i class="fa-solid fa-moon"></i>
          </button>
          <button class="control-button" id="close-button" title="Close window">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
      </header>

      <div class="skill-analysis-content">
        <!-- Left Sidebar -->
        <aside class="skill-sidebar">
          <!-- Player Info Card -->
          <div class="player-info-card">
            <div class="player-name" id="player-name">Player</div>
            <div class="player-stats">
              <span id="player-uid">UID: -</span>
              <span id="player-power">Power: -</span>
              <span id="player-level">Lv: -</span>
            </div>
          </div>

          <!-- DPS/HPS Graph -->
          <div class="collapsible-card">
            <div class="card-header">
              <span>DPS/HPS real-time graph</span>
              <i class="fa-solid fa-chevron-down collapse-icon"></i>
            </div>
            <div class="card-body">
              <canvas id="dps-graph-chart" height="200"></canvas>
            </div>
          </div>

          <!-- Skill Distribution -->
          <div class="collapsible-card">
            <div class="card-header">
              <span>Skill Distribution</span>
              <i class="fa-solid fa-chevron-down collapse-icon"></i>
            </div>
            <div class="card-body">
              <canvas id="skill-distribution-chart" height="250"></canvas>
            </div>
          </div>

          <!-- Damage Distribution -->
          <div class="collapsible-card">
            <div class="card-header">
              <span>Damage Distribution</span>
              <i class="fa-solid fa-chevron-down collapse-icon"></i>
            </div>
            <div class="card-body">
              <canvas id="damage-distribution-chart" height="200"></canvas>
            </div>
          </div>
        </aside>

        <!-- Main Content Area -->
        <main class="skill-main-content">
          <!-- Summary Cards -->
          <div class="summary-cards">
            <div class="summary-card">
              <div class="summary-grid">
                <div class="summary-item">
                  <span class="summary-label">Total DMG</span>
                  <span class="summary-value" id="summary-total-dmg">0</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Crit</span>
                  <span class="summary-value" id="summary-crit">0%</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">DPS</span>
                  <span class="summary-value" id="summary-dps">0</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Lucky</span>
                  <span class="summary-value" id="summary-lucky">0%</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Hits</span>
                  <span class="summary-value" id="summary-hits">0</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Crit Rate</span>
                  <span class="summary-value" id="summary-crit-rate">0</span>
                </div>
              </div>
            </div>
            <div class="summary-card">
              <div class="summary-grid">
                <div class="summary-item">
                  <span class="summary-label">Normal</span>
                  <span class="summary-value" id="summary-normal">0</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Lucky</span>
                  <span class="summary-value" id="summary-lucky-hits">0</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Crit</span>
                  <span class="summary-value" id="summary-crit-hits">0</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Avg</span>
                  <span class="summary-value" id="summary-avg">0</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Lucky Hits</span>
                  <span class="summary-value" id="summary-lucky-count">0</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Hits Taken</span>
                  <span class="summary-value" id="summary-hits-taken">0</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Skills Table -->
          <div class="skills-table-wrapper">
            <div class="table-controls">
              <select class="sort-select" id="sort-select">
                <option value="damage">Sort by Damage</option>
                <option value="dps">Sort by DPS</option>
                <option value="hits">Sort by Hits</option>
                <option value="crit">Sort by Crit Rate</option>
              </select>
            </div>
            <table class="skills-table">
              <thead>
                <tr>
                  <th>Skill Name</th>
                  <th>Damage</th>
                  <th>Total DPS</th>
                  <th>Hit Count</th>
                  <th>Crit Rate</th>
                  <th>Avg Per Hit</th>
                  <th>Total DMG %</th>
                </tr>
              </thead>
              <tbody id="skill-items">
                <!-- Skills will be inserted here -->
              </tbody>
            </table>
          </div>
        </main>
      </div>
    </div>

    <script src="js/guiSkillAnalysis.js"></script>
  </body>
</html>
